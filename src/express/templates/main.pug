extends layout.pug
include partials/categories.pug
include partials/articles-list.pug
include partials/pagination.pug

block content

  main.main-page
    h1.visually-hidden Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð±Ð»Ð¾Ð³Ð° Ð¢Ð¸Ð¿Ð¾Ñ‚ÐµÐºÐ°
    p
      | Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ð»Ð°Ð´ÐµÐ»ÐµÑ† Ð±Ð»Ð¾Ð³Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐµÐ±Ñ ðŸ‘
    if !articles || articles.length === 0
      .main-page__empty-wrapper
          p.main-page__empty-text
            | Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð¿ÑƒÑÑ‚Ð¾!
    else
      +categories(categories)
      .main-page__section-flex
        section.main-page__hot.hot
          h2(class=`${mostDiscussedArticles.length > 0 ? 'hot__name' : 'hot__name hot__name--empty'} `) Ð¡Ð°Ð¼Ð¾Ðµ Ð¾Ð±ÑÑƒÐ¶Ð´Ð°ÐµÐ¼Ð¾Ðµ&nbsp;
            span.hot__icon.hot__icon--fire
          if mostDiscussedArticles.length > 0
            ul.hot__list
              each article in mostDiscussedArticles
                li.hot__list-item
                  a.hot__list-link(href=`/articles/${article.id}`)= truncateText(article.announce, 100)
                    sup.hot__link-sup= ` ${article.commentsCount}`
          else
            p.hot__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚...
        section.main-page__last.last
          h2.last__name
            | ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸&nbsp;
            span.last__icon.last__icon--cloud
          if lastComments.length > 0
            ul.last__list
              each comment in lastComments
                li.last__list-item
                  img.last__list-image(src=`img/${comment.users.avatar}` width='20' height='20' alt='ÐÐ²Ð°Ñ‚Ð°Ñ€ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ')
                  b.last__list-name= `${comment.users.firstname} ${comment.users.lastname}`
                  a.last__list-link(href=`/articles/${comment.articleId}/#comments`)= truncateText(comment.text, 100)
          else
            p.hot__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚...
      section.main-page__list.preview
        h2.visually-hidden Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ²ÑŒÑŽ ÑÑ‚Ð°Ñ‚ÐµÐ¹
        ul.preview__list
          each article in articles
            +articles-list(article)
      if pagesCount > 1
        +pagination(pagesCount, activePage, template, activeCategory)

